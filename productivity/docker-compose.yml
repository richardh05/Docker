services:
  mealie:
    image: ghcr.io/mealie-recipes/mealie:v3.9.2 # 
    container_name: mealie
    restart: always
    labels:
      glance.name: Mealie
      glance.icon: si:mealie
      glance.url: ${URL}/mealie
      glance.description: Recipes
      glance.category: Productivity
      glance.id: mealie
    ports:
        - "9925:9000" # 
    deploy:
      resources:
        limits:
          memory: 1000M # 
    volumes:
      - ${DATA}/mealie:/app/data/
    environment:
      # Set Backend ENV Variables Here
      ALLOW_SIGNUP: ${SIGNUPS}
      PUID: ${PUID}
      PGID: ${PGID}
      TZ: Europe/London

  syncthing:
    image: syncthing/syncthing
    container_name: syncthing
    labels:
      glance.name: Syncthing
      glance.icon: si:syncthing
      glance.url: ${URL}/syncthing
      glance.description: File Sync
      glance.category: Productivity
      glance.id: syncthing
    # hostname: my-syncthing
    environment:
      - PUID=${PUID}
      - PGID=${PGID}
      - STGUIADDRESS=${URL}/syncthing
    volumes:
      - ${DATA}/syncthing:/var/syncthing/config
      - ${MEDIA}/Sync:/var/syncthing
    network_mode: host
    restart: unless-stopped
    healthcheck:
      test: curl -fkLsS -m 2 127.0.0.1:8384/rest/noauth/health | grep -o --color=never OK || exit 1
      interval: 1m
      timeout: 10s
      retries: 3

  vikunja:
    image: vikunja/vikunja
    labels:
      glance.name: Vikunja
      glance.icon: si:vikunja
      glance.url: ${URL}/vikunja
      glance.description: Todo Lists
      glance.category: Productivity
      glance.id: vikunja
    environment:
      VIKUNJA_SERVICE_JWTSECRET: ${VIKUNJA_SECRET}
      VIKUNJA_SERVICE_PUBLICURL: ${URL}/vikunja
      VIKUNJA_DATABASE_TYPE: sqlite
    ports:
      - 3456:3456
    volumes:
      - ${DATA}/vikunja/files:/app/vikunja/files
      - ${DATA}/vikunja/db:/db
    restart: unless-stopped